var httpRequest,subWinContactUs=null,subWinEmailPass=null,subWinPrivacy=null;function screenLoad(){"false"==document.frmLogin.hidRedirect.value&&"null"!=document.frmLogin.hidRedirect.value||openMessagesWindow("load"),document.frmLogin&&document.frmLogin.txtUser,document.frmScheds&&document.frmScheds.selCarrier&&document.frmScheds.selCarrier.focus()}function screenUnload(){closeWindow("email"),closeWindow("privacy")}function openWindow(e){var t=100,s=100,o="directories=no,hotkeys=no,menubar=no,location=no,resizable=yes,status=no,toolbar=no,";"contact"==e?(subWinContactUs=window.open("contact-us.jsp?email=false","ContactUsWindow",o+"scrollbars=no,height=600,width=505,left="+t+",top="+s)).focus():"email"==e?((subWinEmailPass=window.open("email_password.jsp","EmailPasswordWindow",o+"scrollbars=no,height=200,width=750,left="+t+",top="+s)).focus(),self.onfocus=new Function("closeWindow('email')")):"privacy"==e?((subWinPrivacy=window.open("disclaimer.jsp","PrivacyWindow",o+"scrollbars=yes,height=485,width=738,left="+t+",top="+s)).focus(),self.onfocus=new Function("closeWindow('privacy')")):"terms_of_use"==e?((subWinPrivacy=window.open("terms_of_use.jsp","PrivacyWindow",o+"scrollbars=yes,height=485,width=738,left="+t+",top="+s)).focus(),self.onfocus=new Function("closeWindow('terms_of_use')")):"App_terms"==e?((subWinPrivacy=window.open("App_terms.jsp","PrivacyWindow",o+"scrollbars=yes,height=485,width=738,left="+t+",top="+s)).focus(),self.onfocus=new Function("closeWindow('App_terms')")):"demo"==e?((subWinPrivacy=window.open("play-demo.jsp","PrivacyWindow",o+"scrollbars=yes,height=200,width=738,left="+t+",top="+s)).focus(),self.onfocus=new Function("closeWindow('privacy')")):"delta"==e?(subWinDelta=window.open("home-delta.jsp","delta",o+"scrollbars=yes,height=400,width=738,left="+t+",top="+s),subWinDelta.focus(),self.onfocus=new Function("closeWindow('delta')")):"double"==e?(subWinDecember=window.open("Double-December.jsp","DoubleDecember",o+"scrollbars=yes,height=250,width=738,left="+t+",top="+s),subWinDecember.focus(),self.onfocus=new Function("closeWindow('double')")):"fast"==e?((subWinPrivacy=window.open("fast_forward.jsp","FastWindow",o+"scrollbars=yes,height=240,width=600,left="+t+",top="+s)).focus(),self.onfocus=new Function("closeWindow('fastforward')")):"friend"==e?((subWinPrivacy=window.open("tell-a-friend.jsp","TellAFriendWindow",o+"scrollbars=yes,height=496,width=738,left="+t+",top="+s)).focus(),self.onfocus=new Function("closeWindow('friend')")):"topstation"==e?(subWinTopStation=window.open("top_station.jsp","TopStationWindow",o+"scrollbars=yes,height=296,width=738,left="+t+",top="+s),subWinTopStation.focus(),self.onfocus=new Function("closeWindow('topstation')")):"IATA"==e?(subWinIATA=window.open("IATA_Notice.jsp","IATAWindow",o+"scrollbars=yes,height=372,width=748,left="+t+",top="+s),subWinIATA.focus(),self.onfocus=new Function("closeWindow('IATA')")):"MSG"==e?window.open("User_Notify_Msg.jsp","UserNotifyMessage",o+"scrollbars=no,height=545,width=700,left="+t+",top="+s):"CPSApps"==e&&((subWinPrivacy=window.open("/lmsweb/DownloadCPSMobileApp.jsp","CPSMobileApps",o+"height=550,width=500,scrollbars=no,resizable=no")).focus(),self.onfocus=new Function("closeWindow('CPSApps')"))}function closeWindow(e){"contact"==e&&(null==subWinContactUs||subWinContactUs.closed||(subWinContactUs.close(),subWinContactUs=null)),"email"==e&&(null==subWinEmailPass||subWinEmailPass.closed||(subWinEmailPass.close(),subWinEmailPass=null)),"privacy"==e&&(null==subWinPrivacy||subWinPrivacy.closed||(subWinPrivacy.close(),subWinPrivacy=null))}function validateForm(){var e="",t=1;if(showProgressImage("block"),"Password"!=document.frmLogin.txtPassword.value&&"Password"!=document.frmLogin.txtPassword.value||(e="Password [6-32 chars] \n"+e,document.getElementById("txtPassword")&&"block"==document.getElementById("txtPassword").style.display&&(t=2),document.getElementById("txtPassword1")&&"block"==document.getElementById("txtPassword1").style.display&&(t=3)),"User ID"==document.frmLogin.txtUser.value&&(e="User ID [6-32 chars] \n"+e,t=1),0<e.length)return alert("The following field(s) are invalid --\n\n"+e),1==t&&document.frmLogin.txtUser.focus(),2==t&&document.frmLogin.txtPassword.focus(),3==t&&document.frmLogin.txtPassword1.focus(),showProgressImage("none"),!1;if(!validate_checkField(document.frmLogin.txtUser,!0,6,32,300,!1,!0,!0))return showProgressImage("none"),!1;if(document.getElementById("txtPassword")&&"block"==document.getElementById("txtPassword").style.display&&!validate_checkField_signon(document.frmLogin.txtPassword,!0,6,32,300,!1,!0,!0))return showProgressImage("none"),!1;if(document.getElementById("txtPassword1")&&"block"==document.getElementById("txtPassword1").style.display){if(document.frmLogin.txtPassword1&&"Password"==document.frmLogin.txtPassword1.value)return alert("The following field(s) are invalid --\n\nPassword [6-32 chars]"),document.frmLogin.txtPassword1.focus(),showProgressImage("none"),!1;if(!validate_checkField_signon(document.frmLogin.txtPassword1,!0,6,32,300,!1,!0,!0))return showProgressImage("none"),!1}return showProgressImage("none"),!0}function validateUserID(e){null!=e&&""==e&&0==e.length&&(document.frmLogin.txtUser.value="User ID")}function validatePassword(e){null!=e&&""==e&&0==e.length&&(document.getElementById("txtPassword").style.display="none",document.getElementById("txtPassword1").style.display="block"),null!=e&&""!=e&&"Password"==e&&0<e.length&&document.getElementById("txtPassword")&&"block"==document.getElementById("txtPassword").style.display&&(document.frmLogin.txtPassword.value="",document.frmLogin.txtPassword.focus())}function MM_swapImgRestore(){for(var e,t=document.MM_sr,s=0;t&&s<t.length&&(e=t[s])&&e.oSrc;s++)e.src=e.oSrc}function MM_preloadImages(){var e=document;if(e.images){e.MM_p||(e.MM_p=new Array);for(var t=e.MM_p.length,s=MM_preloadImages.arguments,o=0;o<s.length;o++)0!=s[o].indexOf("#")&&(e.MM_p[t]=new Image,e.MM_p[t++].src=s[o])}}function MM_findObj(e,t){var s,o,n;for(t=t||document,0<(s=e.indexOf("?"))&&parent.frames.length&&(t=parent.frames[e.substring(s+1)].document,e=e.substring(0,s)),!(n=t[e])&&t.all&&(n=t.all[e]),o=0;!n&&o<t.forms.length;o++)n=t.forms[o][e];for(o=0;!n&&t.layers&&o<t.layers.length;o++)n=MM_findObj(e,t.layers[o].document);return n=!n&&t.getElementById?t.getElementById(e):n}function MM_swapImage(){var e,t,s=0,o=MM_swapImage.arguments;for(document.MM_sr=new Array,e=0;e<o.length-2;e+=3)null!=(t=MM_findObj(o[e]))&&((document.MM_sr[s++]=t).oSrc||(t.oSrc=t.src),t.src=o[e+2])}function toggleMenuImage(e){"SCHED"==e?(document.getElementById("img1").src="/lmsweb/images/Schedule_Active.jpg",document.getElementById("img2").src="/lmsweb/images/Flight_Normal.jpg",document.getElementById("img3").src="/lmsweb/images/Track Shipmentsl_Normal.jpg",document.getElementById("div1").style.display="",document.getElementById("div2").style.display="none",document.getElementById("div3").style.display="none"):"FLT"==e?(document.getElementById("img1").src="/lmsweb/images/Schedule_Normal.jpg",document.getElementById("img2").src="/lmsweb/images/Flight_Active.jpg",document.getElementById("img3").src="/lmsweb/images/Track Shipmentsl_Normal.jpg",document.getElementById("div2").style.display="",document.getElementById("div1").style.display="none",document.getElementById("div3").style.display="none"):"AWB"==e&&(document.getElementById("img1").src="/lmsweb/images/Schedule_Normal.jpg",document.getElementById("img2").src="/lmsweb/images/Flight_Normal.jpg",document.getElementById("img3").src="/lmsweb/images/Track Shipmentsl_Active.jpg",document.getElementById("div3").style.display="",document.getElementById("div1").style.display="none",document.getElementById("div2").style.display="none")}function displayAlert(e,t,s,o){e&&t?location.href="secure/admin-branch.jsp?qsCarrier="+s:e?alert("Please contact your branch admin"):window.open(o,"IATAWindow")}function openMessagesWindow(e){var t=document.frmLogin,s=t.hidMsgCount.value,o=0,n=new Array,i=0;t.hidUserMsg&&(t.hidUserMsg.value="N");for(var l=0;l<s;l++)t.hidUserMsg[l]&&(t.hidUserMsg[l].value="N");if(0!=s&&(1!=s||"N"!=t.hidNextLogon.value||"href"==e)){if(1==s&&"Y"==t.hidNextLogon.value&&"N"==t.hidNotShowAgain.value)return document.getElementById("messageLayer0").style.display="",void(document.getElementById("shadowFilter").style.display="");if(1==s&&"href"==e)return document.getElementById("messageLayer0").style.display="",void(document.getElementById("shadowFilter").style.display="");if("href"!=e)for(l=1;l<s;l++)"Y"==t.hidNextLogon[l].value&&"N"==t.hidNotShowAgain[l].value&&(n[o]=l,o+=1);if(0==o&&"href"!=e||(document.getElementById("shadowFilter").style.display=""),4<o)for(l=o-4;l<s&&(t.hidUserMsg[l].value="Y",4!=(i+=1));l++);else if("href"==e)for(l=0;l<s;l++)t.hidUserMsg[l].value="Y";else for(l=0;l<s&&("Y"!=t.hidNextLogon[l].value||"N"!=t.hidNotShowAgain[l].value||(t.hidUserMsg[l].value="Y",4!=(i+=1)));l++);DisplayUserMsg(s)}}function DisplayUserMsg(e){for(var t=e-1;0<=t;t--)if("Y"==document.frmLogin.hidUserMsg[t].value)return document.getElementById("messageLayer"+t).style.display="",!1;document.getElementById("shadowFilter").style.display="none"}function populateUserForm(e,t){e="/lmsweb/User_Notify_Msg.jsp?msgNo="+e;"btnNotShowAgain"==t.name&&(e+="&btnNotShowAgain=NotShowAgain"),"btnNextLogon"==t.name&&(e+="&btnNextLogon=NextLogon"),getServerInfoByAJAX(e,!0,!0)}function getServerInfoByAJAX(e,t,s){UserNoyify_CreateXmlHttp(),UserNotify_ConfigureXmlHttp(e,t,s)}function UserNoyify_CreateXmlHttp(){if(window.ActiveXObject)try{httpRequest=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{httpRequest=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){httpRequest=!1}}else window.XMLHttpRequest&&(httpRequest=new XMLHttpRequest)}function UserNotify_ConfigureXmlHttp(e,t,s){httpRequest&&(httpRequest.open("POST",e,s),httpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),httpRequest.send(""),4==httpRequest.readyState&&200!=httpRequest.status&&alert("Error loading page\n"+httpRequest.status+":"+httpRequest.statusText))}function printUsrMsg(e,t){for(var s=0;s<t;s++)document.getElementById("messageLayer"+s).className="",s!=e&&(document.getElementById("messageLayer"+s).className="userMsgPrnt");window.print()}function displayCPSUnavailableImage(){document.getElementById("unavailableImage").style.display="block",document.getElementById("shadowFilterForBannedImage").style.display="block"}function showProgressImage(e){document.getElementById("shadowFilterID").style.display=e,document.getElementById("imgProgID").style.display=e}
function submitSchedules(){var e,t,a,s,i;$("#imgProgID").css({top:"400px"}),$("#shadowFilterID").css({display:"block"}),$("#imgProgID").css({display:"block"}),validateFrmScheds()?(document.frmScheds.btnRetrieve.value="DISPLAY SCHEDULES",e=$("select[name=selCarrier]").val(),t=$("input[name=selDate]").val(),i=$("input[name=txtDepart]").val(),a=$("input[name=txtOrigin]").val(),s=$("input[name=txtDest]").val(),$("input[name=chkDirectFlights]:checked").val(),i="retrieve=YES&selCarrier="+e+"&signedOn=false&selDate="+t.toUpperCase()+"&txtOrigin="+a+"&txtDest="+s+"&txtDepart="+i+"&chkDirectFlights=N&selWeek=&hdnMidDate=&txtEndDate=",window.location.href="flight_schedules.jsp?"+i):($("#shadowFilterID").css({display:"none"}),$("#imgProgID").css({display:"none"}))}function submitFlights(){var e,t,a;$("#imgProgID").css({top:"400px"}),$("#shadowFilterID").css({display:"block"}),$("#imgProgID").css({display:"block"}),validateFrmMenuStatus()?(document.frmMenuStatus.btnSubmit.value="DISPLAY FLIGHT",e=document.frmMenuStatus.selCarrier.value,t=$("input[name=selFlightDate]").val(),a=$("input[name=txtFlightNbr]").val(),a="retrieve=YES&selCarrier="+e+"&selFlightDate="+t.toUpperCase()+"&txtFlightNbr="+a,window.location.href="flight_status.jsp?"+a):($("#shadowFilterID").css({display:"none"}),$("#imgProgID").css({display:"none"}))}function submitTracking(){if($("#imgProgID").css({top:"400px"}),$("#shadowFilterID").css({display:"block"}),$("#imgProgID").css({display:"block"}),!validateFrmMenuTracking())return $("#shadowFilterID").css({display:"none"}),$("#imgProgID").css({display:"none"}),!1;document.frmMenuTracking.btnSearch.value="TRACK",$("#shadowFilterID").css({display:"none"}),$("#imgProgID").css({display:"none"});var e=document.frmMenuTracking.selCarrier0.value,t=$("input[name=txtACN0]").val(),a=$("input[name=txtSRF0]").val();window.location.href="tracking-awb.jsp?"+("retrieve=YES&selCarrier0="+e+"&txtACN0="+t+"&txtSRF0="+a)}function setCarrierDateRange(e,t){$.ajax({type:"POST",url:"carrierdaterange.jsp?carrier="+e,cache:!1,success:function(e){e="+"+parseInt(e.trim())+"d";"SCHEDULES"==t?setSchedulesFlightDateRange("-1d",e):"FLIGHTSTATUS"==t&&setFlightStatusFlightDateRange("-1d",e)},error:function(e,t,a){},async:!0})}function displayCustomCalendar(a,e,t){var s="#"+a;$(s).datepicker("destroy"),$(s).datepicker({beforeShow:function(e,t){var a=t.dpDiv,s=$(this).offset().top+$(this).outerHeight(),i=$(this).offset().left+55;setTimeout(function(){a.css({top:s,left:i})},10)},dayNamesMin:["S","M","T","W","T","F","S"],dateFormat:"ddMy",minDate:e,maxDate:t,numberOfMonths:2,onSelect:function(e,t){s="#"+a,$(s).val($(s).val())}})}$(document).ready(function(){$("#processID").length&&$(window).on("load",function(){setTimeout(function(){$("#processID").fadeOut("fast",function(){})},500)})});